# process-inquiry

## 목적
- 내부 처리 원칙과 현재 시스템 상태를 바탕으로 고객 문의를 실제로 처리(조사/수정/조정/안내)합니다.
- 고객 영향 최소화, 보안/컴플라이언스 준수, 감사 가능성을 보장합니다.

## 메타데이터 헤더(공통)
- 반드시 기록: `case_id`, `updated_at(ISO/타임존)`, `author`, `owner`, `status_before`, `status_after`, `links[]`, `content_hash(해당 시)`

## RBAC
- 수행: `cs-processor`
- 승인(필요 시): 변경 유형별 오너(예: 재무/엔지니어링), `cs-manager`

## 입력
- 접수/분류 산출물: `cases/{case_id}-inquiry.md`, `cases/{case_id}-route-decision.md`
- 관련 정책/가이드: `.bmad-cs-operations/data/policies.md`, `sla-matrix.md`, `tone-guide.md`
- 시스템/로그 접근: 애플리케이션/결제/계정/배송 등 도메인별 콘솔/로그

## 선행조건
- 필요한 접근 권한 확인(원격/운영 접근, 변경 승인 필요 여부)
- 작업 전 백업/스냅샷/롤백 전략 확인(해당 시)

## 산출물
- 처리 기록: `cases/{case_id}-processing-notes.md`(조치, 근거, 영향, 롤백, 검증 결과)
- 시스템 변경: 설정/데이터/코드/티켓 상태(증빙 링크 포함)
- 고객용 요약 포인트(통합/답변 단계에서 활용)

## 상태 전이
- before: `assigned` | `escalated-L1` | `escalated-L2` → after: `processed`
- guard: 조치 수행/검증/증빙 기록, 롤백 전략 점검

## SLA/우선순위 반영
- P1: 즉시 대응, 조치/중간 안내 ≤ 15m, 위험 시 `escalate-urgent`
- P2: 업무시간 내 당일 처리, 중간 안내 ≤ 60m
- P3: 1~3영업일 내 처리, 정기 업데이트

## 처리 유형 가이드(예시)
- 정보 제공/안내: 정책/사용 가이드 인용, 링크 제공(내부정보 비공개)
- 데이터 조정: 변경 요건 검증 → 백업 → 변경 → 검증(전/후 스냅샷, 감사 로그)
- 시스템 점검/버그: 재현/로그분석 → 임시조치 → 티켓 생성/링크 → 배포 계획 반영
- 결제/환불: 재무 절차 준수(승인흐름, 금액/세금/전표), 고객 고지 문안 준수

## 단계별 지침
1) 범위 확정: 고객 요구/영향/제약(정책/법무) 재확인
2) 조사: 로그/모니터링/DB 조회로 사실 관계 파악, 원인/대안 도출
3) 변경 계획: 조치 목록/순서/리스크/롤백/검증 계획 수립, 필요 승인 획득
4) 실행: 최소 영향 시간대/방식 선택, 변경 수행, 체크리스트 기반 검증
5) 기록: `processing-notes`에 조치/증빙/검증/롤백 요약, 링크 첨부
6) 고객용 포인트 정리: 무엇을 했는지, 현재 상태, 다음 단계/ETA, 고객 액션
7) 필요시 후속 태스크 생성: 버그 수정/배포/문서 업데이트/FAQ 매크로 추가

## 전/후 검증 체크리스트 표(개별 강화)
| 항목 | 변경 전 | 변경 후 | 증빙 |
|---|---|---|---|
| 상태 코드 | 500 | 200 | 로그 링크 |
| 잔액 | 10,000원 | 0원 | 스크린샷 |

## 검증 체크리스트
- [ ] 정책/규정/약관과 일치
- [ ] 전/후 검증 스텝 수행 및 증빙 존재
- [ ] 고객 영향/리스크 평가 및 완화
- [ ] 롤백 전략/한계 기록
- [ ] 감사 로그/링크 정리

## 실패/에스컬레이션
- 접근/승인 불가, 데이터 무결성 위험, 보안/규제 리스크: L1 에스컬레이션(법무/컴플라이언스 포함 필요 시)
- 조치 실패/재현 불가: 임시 대응+고객 안내, 원인 분석 태스크로 분기

## 보안/컴플라이언스
- 최소 권한 원칙, PII 마스킹, 민감 데이터 비저장/비출력
- 결제/환불/계정 변경은 2인 승인 또는 이중 확인 절차 권장

## 로그/메트릭(선택)
- 처리 소요시간, 시도/성공/실패 횟수, 롤백 발생 여부, 고객 영향도

## 연계/핸드오프
- 답변 초안 생성: `draft-response`
- 품질/컴플라이언스 리뷰: `review-response`/`compliance-check`
- 외부 협업 필요 시: `delegate-to-department` + `track-external-work`

## 에지 케이스
- 변경 실패로 서비스 영향 확대: 즉시 롤백, `escalate-urgent` 트리거, 고객 임시 안내 배포
- 접근 권한 부재: 접근 요청 티켓 생성 후 대체 검증(로그/스크린샷)으로 임시 확인
- 데이터 일관성 의심: 교차 검증(두 시스템 이상), 확정 전 고객 안내 보수적 문구 사용

## 예시
- 입력: 청구 오조정 건, 재무 DB 조정 필요
- 처리: 승인 획득 → 백업 → 조정 → 전/후 검증 표 작성
- 산출: `cases/CASE-1234-processing-notes.md`, 상태 `processed`
