workflow:
  id: cs-escalation
  name: 에스컬레이션 처리
  description: SLA/리스크 기반 L1/L2 승급 및 후속 조치 관리
  type: cs

  decision_points:
    - id: escalation_level
      description: 신호/리스크/영향에 따라 L1/L2 결정
      branches:
        L1: 팀/부서 레벨 조치
        L2: 전사/법무/컴플 포함 워룸 구성

  guards:
    - name: required_metadata
      applies_to: [escalate-urgent]
      checks: [case_id, updated_at, owner]
    - name: customer_comm_requires_signoff
      applies_to: [draft-response, review-response, finalize-response]
      checks: [reviewer, signed_at, content_hash]

  notes:
    - 고객 커뮤니케이션 필요 시 일반 워크플로우와 동일한 프리뷰/Sign-off 절차 적용

  sequence:
    - agent: cs-intake
      action: escalate-urgent
    - agent: cs-manager
      optional: true
      action: assess-priority
    - agent: cs-processor
      action: draft-response
      notes: 고객 커뮤니케이션 필요 시 review/Sign-off → finalize 경유
    - agent: cs-quality
      action: review-response
      optional: true
    - agent: cs-processor
      action: finalize-response
      optional: true
