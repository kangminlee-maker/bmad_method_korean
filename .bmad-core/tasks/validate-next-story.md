# 다음 스토리 검증 작업

## 목적

구현이 시작되기 전에 스토리 초안을 포괄적으로 검증하여 완전하고 정확하며 성공적인 개발을 위한 충분한 컨텍스트를 제공하는지 확인합니다. 이 작업은 환각을 방지하고 구현 준비를 보장하면서 해결해야 할 문제와 격차를 식별합니다.

## 순차적 작업 실행 (현재 작업이 완료될 때까지 진행하지 마세요)

### 0. 핵심 구성 및 입력 로드

- `.bmad-core/core-config.yaml` 로드
- 파일이 존재하지 않으면 중지하고 사용자에게 알림: "core-config.yaml을 찾을 수 없습니다. 이 파일은 스토리 검증에 필요합니다."
- 주요 구성 추출: `devStoryLocation`, `prd.*`, `architecture.*`
- 다음 입력 식별 및 로드:
  - **스토리 파일**: 검증할 초안 스토리 (사용자가 제공하거나 `devStoryLocation`에서 발견)
  - **상위 에픽**: 이 스토리의 요구사항을 포함하는 에픽
  - **아키텍처 문서**: 구성에 따라 (분할 또는 단일)
  - **스토리 템플릿**: 완전성 검증을 위한 `bmad-core/templates/story-tmpl.md`

### 1. 템플릿 완전성 검증

- `bmad-core/templates/story-tmpl.md`를 로드하고 템플릿에서 모든 섹션 제목 추출
- **누락 섹션 확인**: 스토리 섹션과 템플릿 섹션을 비교하여 모든 필수 섹션이 있는지 확인
- **플레이스홀더 검증**: 템플릿 플레이스홀더가 채워지지 않은 채로 남아 있지 않은지 확인 (예: `{{EpicNum}}`, `{{role}}`, `_TBD_`)
- **에이전트 섹션 확인**: 향후 에이전트 사용을 위해 템플릿의 모든 섹션이 존재하는지 확인
- **구조 준수**: 스토리가 템플릿 구조와 형식을 따르는지 확인

### 2. 파일 구조 및 소스 트리 검증

- **파일 경로 명확성**: 생성/수정할 새/기존 파일이 명확히 지정되어 있는가?
- **소스 트리 관련성**: 관련 프로젝트 구조가 개발 노트에 포함되어 있는가?
- **디렉토리 구조**: 새 디렉토리/컴포넌트가 프로젝트 구조에 따라 적절히 위치해 있는가?
- **파일 생성 순서**: 작업이 논리적 순서로 파일이 생성되어야 할 위치를 지정하는가?
- **경로 정확성**: 파일 경로가 아키텍처 문서의 프로젝트 구조와 일치하는가?

### 3. UI/프런트엔드 완전성 검증 (해당하는 경우)

- **컴포넌트 사양**: UI 컴포넌트가 구현을 위해 충분히 상세한가?
- **스타일링/디자인 지침**: 시각적 구현 지침이 명확한가?
- **사용자 상호작용 흐름**: UX 패턴과 동작이 지정되어 있는가?
- **반응형/접근성**: 필요한 경우 이러한 고려사항이 다루어졌는가?
- **통합 지점**: 프런트엔드-백엔드 통합 지점이 명확한가?

### 4. 승인 기준 충족 평가

- **AC 커버리지**: 나열된 작업으로 모든 승인 기준이 충족되는가?
- **AC 테스트 가능성**: 승인 기준이 측정 가능하고 검증 가능한가?
- **누락된 시나리오**: 엣지 케이스나 오류 조건이 다루어졌는가?
- **성공 정의**: 각 AC에 대해 "완료"가 명확히 정의되어 있는가?
- **작업-AC 매핑**: 작업이 특정 승인 기준에 적절히 연결되어 있는가?

### 5. 검증 및 테스트 지침 검토

- **테스트 접근법 명확성**: 테스트 방법이 명확히 지정되어 있는가?
- **테스트 시나리오**: 주요 테스트 케이스가 식별되어 있는가?
- **검증 단계**: 승인 기준 검증 단계가 명확한가?
- **테스트 도구/프레임워크**: 필요한 테스트 도구가 지정되어 있는가?
- **테스트 데이터 요구사항**: 테스트 데이터 요구사항이 식별되어 있는가?

### 6. 보안 고려사항 평가 (해당하는 경우)

- **보안 요구사항**: 보안 요구사항이 식별되고 다루어졌는가?
- **인증/권한 부여**: 액세스 제어가 지정되어 있는가?
- **데이터 보호**: 민감한 데이터 처리 요구사항이 명확한가?
- **취약점 예방**: 일반적인 보안 문제가 다루어졌는가?
- **규정 준수 요구사항**: 규제/준수 요구사항이 다루어졌는가?

### 7. 작업/하위 작업 순서 검증

- **논리적 순서**: 작업이 적절한 구현 순서를 따르는가?
- **의존성**: 작업 의존성이 명확하고 올바른가?
- **세분성**: 작업이 적절한 크기이고 실행 가능한가?
- **완전성**: 작업이 모든 요구사항과 승인 기준을 다루는가?
- **차단 문제**: 다른 작업을 차단할 작업이 있는가?

### 8. 환각 방지 검증

- **소스 검증**: 모든 기술적 주장은 소스 문서로 추적 가능해야 함
- **아키텍처 정렬**: 개발 노트 내용이 아키텍처 사양과 일치
- **가공된 세부사항 없음**: 소스 문서에서 지원되지 않는 기술적 결정 플래그
- **참조 정확성**: 모든 소스 참조가 정확하고 접근 가능한지 확인
- **사실 확인**: 주장을 에픽 및 아키텍처 문서와 교차 참조

### 9. 개발 에이전트 구현 준비

- **자체 포함 컨텍스트**: 외부 문서를 읽지 않고 스토리를 구현할 수 있는가?
- **명확한 지침**: 구현 단계가 모호하지 않은가?
- **완전한 기술적 컨텍스트**: 필요한 모든 기술적 세부사항이 개발 노트에 있는가?
- **누락된 정보**: 중요한 정보 격차 식별
- **실행 가능성**: 모든 작업이 개발 에이전트가 실행할 수 있는가?

### 10. 검증 보고서 생성

다음을 포함하는 구조화된 검증 보고서 제공:

#### 템플릿 준수 문제

- 스토리 템플릿에서 누락된 섹션
- 채워지지 않은 플레이스홀더나 템플릿 변수
- 구조적 형식 문제

#### 중요한 문제 (필수 수정 - 스토리 차단됨)

- 구현을 위한 필수 정보 누락
- 부정확하거나 검증할 수 없는 기술적 주장
- 불완전한 승인 기준 커버리지
- 필수 섹션 누락

#### 수정해야 할 문제 (중요한 품질 개선)

- 불명확한 구현 지침
- 누락된 보안 고려사항
- 작업 순서 문제
- 불완전한 테스트 지침

#### 있으면 좋은 개선사항 (선택적 개선)

- 구현에 도움이 될 추가 컨텍스트
- 효율성을 향상시킬 명확화
- 문서 개선

#### 환각 방지 발견 사항

- 검증할 수 없는 기술적 주장
- 누락된 소스 참조
- 아키텍처 문서와의 불일치
- 가공된 라이브러리, 패턴 또는 표준

#### 최종 평가

- **GO**: 스토리가 구현 준비 완료
- **NO-GO**: 스토리가 구현 전에 수정 필요
- **구현 준비 점수**: 1-10 척도
- **신뢰도 수준**: 성공적인 구현에 대한 높음/중간/낮음
