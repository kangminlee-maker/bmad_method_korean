# 다음 스토리 생성

## 목적

이 작업은 스크럼 마스터가 PRD와 아키텍처에서 개발자를 위한 다음 구현 스토리를 생성하는 과정을 안내합니다.

## 이 작업을 사용하는 경우

**이 작업을 사용하는 경우:**

- 개발자가 새로운 작업 항목이 필요할 때
- 다음에 구현할 스토리를 결정할 때
- 에픽에서 개별 스토리를 생성할 때

**다른 작업을 사용해야 하는 경우:**

- 기존 스토리를 검토하려면: `review-story` 작업 사용
- 스토리를 검증하려면: `validate-next-story` 작업 사용
- 완전한 새 에픽을 생성하려면: PM과 함께 PRD 프로세스 사용

## 지침

### 1. 초기 설정 및 준비

[[LLM: 이 섹션에 대한 LLM 지침:
- 필요한 파일들을 로드하기 전에 사용자에게 확인
- 파일이 없으면 위치를 묻기
- 스토리 템플릿을 준비
]]

**필수 준비 사항:**

- [ ] 분할된 PRD 섹션들
- [ ] 분할된 아키텍처 섹션들
- [ ] 이전 스토리들 (있는 경우)
- [ ] 스토리 템플릿 (story-tmpl.yaml)

**컨텍스트 수집:**

1. 현재 에픽과 진행 상황 확인
2. 완료된 스토리 검토
3. 의존성 파악

### 2. 스토리 선택 및 상세화

[[LLM: 스토리 선택 프로세스:
- PRD에서 다음 논리적 스토리 식별
- 의존성 확인
- 크기 평가 (2-4시간 작업량)
- 수직 슬라이스 확인
]]

**스토리 선택 기준:**

- 논리적 순서
- 최소 의존성
- 명확한 가치 제공
- AI 에이전트가 한 세션에서 완료 가능

### 3. 스토리 작성

[[LLM: 스토리 템플릿 사용:
- story-tmpl.yaml 로드
- 모든 섹션 완성
- 명확한 승인 기준 작성
- 구현 노트 추가
]]

**스토리 구성 요소:**

1. **스토리 설명**: As a/I want/So that 형식
2. **승인 기준**: 명확하고 테스트 가능한 기준
3. **구현 노트**: 기술적 가이드라인
4. **테스트 요구사항**: 필요한 테스트 유형

### 4. 검증 및 최종화

[[LLM: 최종 확인:
- story-draft-checklist 실행
- 의존성 재확인
- 크기 검증
- 사용자 승인 받기
]]

**체크리스트:**

- [ ] 스토리가 독립적인가?
- [ ] 가치를 제공하는가?
- [ ] 테스트 가능한가?
- [ ] 적절한 크기인가?
- [ ] 승인 기준이 명확한가?

### 5. 스토리 저장 및 전달

[[LLM: 저장 프로세스:
- 적절한 위치에 스토리 저장
- 파일명 규칙 따르기
- 상태를 'draft'로 설정
- 사용자에게 다음 단계 안내
]]

**저장 규칙:**

```
docs/stories/[epic-number]-[story-number]-[brief-name].md
예: docs/stories/01-01-user-registration.md
```

## 출력 예시

```markdown
# 스토리 1.1: 사용자 등록

**상태**: draft
**에픽**: 1 - 기초 및 핵심 인프라
**예상 시간**: 3시간

## 스토리

사용자로서,
나는 이메일과 비밀번호로 계정을 등록하고 싶다,
서비스를 사용하기 시작할 수 있도록.

## 승인 기준

1. 사용자는 등록 양식을 볼 수 있다
2. 이메일 검증이 작동한다
3. 비밀번호 강도 요구사항이 적용된다
4. 성공적인 등록 후 환영 페이지로 리디렉션된다
5. 중복 이메일이 적절히 처리된다

## 구현 노트

- 아키텍처의 인증 서비스 사용
- 비밀번호는 bcrypt로 해시
- 이메일 검증 토큰 생성
- 적절한 오류 메시지 표시

## 테스트 요구사항

- 단위 테스트: 검증 로직
- 통합 테스트: 등록 플로우
- E2E 테스트: 전체 사용자 여정
```

## 중요한 알림사항

**❌ 절대 하지 마십시오:**

- 너무 큰 스토리 생성
- 의존성이 많은 스토리 생성
- 구현 세부사항 과도하게 지정

**✅ 항상 하십시오:**

- PRD와 아키텍처 정렬 유지
- 명확한 가치 정의
- 테스트 가능한 승인 기준 작성
- 개발자 관점 고려
